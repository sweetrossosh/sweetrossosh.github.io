<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ru">
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
		<meta name="document-state" content="Static">
		<meta name="generator" content="Geany 1.23.1">
		<meta name=viewport content="width=device-width, initial-scale=1">
		<meta http-equiv="content-language" content="ru">
		
		<meta name="robots" content="none">
		
		<title>
			Фотографии — торты на заказ (г. Россошь).
		</title>
		
		<link rel="icon" type="image/vnd.microsoft.icon" href="../favicon.ico">
		<!--<link href="http://fonts.googleapis.com/css?family=Oranienbaum&amp;subset=latin,cyrillic" rel="stylesheet" type="text/css">-->
		<link href="all.css" rel="stylesheet" type="text/css">
		<link href="../Oranienbaum.css" rel="stylesheet" type="text/css">
	</head>
	<body onkeyup="if (event.keyCode == 37 || event.keyCode == 40) left(); if (event.keyCode == 39 || event.keyCode == 38) right();">
		<script type="text/javascript">
			// Mouse Wheel
			{var const_wheel_timeout = 500; // ms
			 var body = window.document.getElementsByTagName("body")[0];
			 var timeoff = true;
			 var func = function(event)
			 {
				 if (timeoff == false) return false;
				 event = event || window.event;
				 var d = event.deltaY || event.deltaX || event.detail || event.wheelDelta;
				 if (d*(event.deltaX?-1:1) > 0) left();
				 else if (d*(event.deltaX?-1:1) < 0) right();
				 timeoff = false;
				 setTimeout(function(){timeoff = true;},const_wheel_timeout)
			 }
				if ('onwheel' in document) body.onwheel = func;
				else if ('onmousewheel' in document) body.onmousewheel = func;
				else if ('onMozMousePixelScroll' in document) body.onMozMousePixelScroll = func;
			}
		</script>
		
		
		<div class="preloads">
			<img id="preload1" src="" alt="">
			<img id="preload2" src="" alt="">
		</div>
		
		<div><img id="preload_anim" src="preload.gif" alt="Loading..."></div>
		
		<div><img id="cimg" src="" alt=""></div>
		
		<div id="left" onclick="left()"></div>
		<div id="right" onclick="right()"></div>
		
		<div style="bottom: 0; height: 36pt;" class="num_str">
			<a href="#" onclick="left(); return false;">&lt;туда</a> <span id="num">0/0</span> <a href="#" onclick="right(); return false;">cюда&gt;</a>
			<br>
			<a href="../">главная</a>
		</div>
		
		<script type="text/javascript" src="photos.js"></script>
		
		<div style="top: 0; font-size: 12pt;" id="cats" class="num_str">
			<script type="text/javascript">
				for (var X = 0; X < cat.length; ++X)
				{
					var e = document.createElement("a");
					e.id = "cat" + (X + 1).toString();
					e.href = "#" + cat[X].index.left.toString();
					e.onclick = function(){
						var Y = this.id.substr(3) - 1;
						Y = cat[Y].index;
						setI(Y.left - 1);
						return false;
					};
					e.innerHTML = cat[X].value;
					window.document.getElementById("cats").appendChild(e);
				}
			</script>
		</div>
		
		<script type="text/javascript">
			var current_index = 0;
			
			function setI(I)
			{
				current_index = I;
				refresh(true);
			}
			function right()
			{
				setI(getNextIndex(current_index, true, names.length));
			}
			function left()
			{
				setI(getNextIndex(current_index, false, names.length));
			}
			function getNextIndex(index, positive, len)
			{
				var t = index + (positive?1:-1);
				if (t < 0) t = len - 1;
				if (t >= len) t = 0;
				return t;
			}
			function refresh(anim)
			{
				window.location.hash = (current_index + 1).toString();
				if (anim == true) window.document.getElementById("cimg").classList.add("change");
				
				// category
				for(var X = 0; X < cat.length; ++X)
				{
					var cat_e = window.document.getElementById("cat" + (X + 1).toString());
					if (cat_e.classList.contains("cat_current"))
					{
						//alert(X);
						cat_e.classList.remove("cat_current");
					}
					if (cat[X].index.left <= current_index + 1)
						if (cat[X].index.right >= current_index + 1)
							cat_e.classList.add("cat_current");
				}
					
				var f = function(){
					window.document.getElementById("cimg").src = "";
					window.document.getElementById("cimg").onload = function()
					{
						window.document.getElementById("preload_anim").style.display = "none";
						if (anim == true) window.document.getElementById("cimg").classList.remove("change");
					}
					window.document.getElementById("preload_anim").style.display = "";
					window.document.getElementById("cimg").src = names[current_index][0];
					window.document.getElementById("cimg").alt = "#" + (current_index + 1).toString();
					window.document.getElementById("num").innerHTML = (current_index + 1).toString() + "/" + names.length.toString();
					window.document.getElementById("preload1").src = names[getNextIndex(current_index, true, names.length)][0].toString();
					window.document.getElementById("preload2").src = names[getNextIndex(current_index, false, names.length)][0].toString();
				}
				if (anim == true) setTimeout(f, 500);
				else f();
			}
			
			window.onload = function(){
				if (window.location.hash.length > 1) current_index = parseInt(window.location.hash.substr(1)) - 1;
				if ((current_index >= 0 && current_index < names.length) == false) current_index = 0;
				refresh(false);
			}
		</script>
		
		<noscript>
			<div style="position: absolute; width: 100%; height: 100%; left: 0; top: 0; background-color: white; text-align: center">
				<p>Для работы каталога требуется включённый <a href="http://www.enable-javascript.com/ru/">javascript</a>!</p>
				<p><a href="../">Главная страница</a></p>
			</div>
		</noscript>
		<!-- Yandex.Metrika counter -->
		<script src="//mc.yandex.ru/metrika/watch.js" type="text/javascript"></script><script type="text/javascript">try { var yaCounter27726921 = new Ya.Metrika({id:27726921}); } catch(e) { }</script><noscript><div><img src="//mc.yandex.ru/watch/27726921" style="position:absolute; left:-9999px;" alt=""></div></noscript>
		<!-- /Yandex.Metrika counter -->
	</body>
</html>
